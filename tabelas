DROP TABLE IF EXISTS `acesso_apk`;
CREATE TABLE `acesso_apk` (
  `senha` varchar(10) NOT NULL,
  `usuario` varchar(45) NOT NULL,
  `cargo` varchar(25) NOT NULL,
  `nome` varchar(60) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `acesso_apk`
  ADD PRIMARY KEY (`senha`);
--
-- RELATIONS FOR TABLE `acesso_apk`:

DROP TABLE IF EXISTS `acesso_cofre`;
CREATE TABLE `acesso_cofre` (
  `crip_cartao` varchar(20) NOT NULL,
  `nome` varchar(25) NOT NULL,
  `sobrenome` varchar(40) NOT NULL,
  `data_acesso` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `acesso_cofre`
  ADD PRIMARY KEY (`crip_cartao`);
--
-- RELATIONS FOR TABLE `acesso_cofre`:
--   `crip_cartao`
--       `cadastro` -> `crip_cartao`

DROP TABLE IF EXISTS `cadastro`;
CREATE TABLE `cadastro` (
  `crip_cartao` varchar(20) NOT NULL,
  `nome` varchar(25) NOT NULL,
  `sobrenome` varchar(40) NOT NULL,
  `cargo` varchar(25) NOT NULL,
  `data_admissao` date NOT NULL,
  `dias_acesso` set('segunda','terça','quarta','quinta','sexta') NOT NULL,
  `horario_acesso` set('10:00 às 11:00','11:00 às 12:00','14:00 às 15:00','15:00 às 16:00','16:00 às 15:00') NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `cadastro`
  ADD PRIMARY KEY (`crip_cartao`);
--
-- RELATIONS FOR TABLE `cadastro`:

ALTER TABLE `acesso_cofre`
  ADD CONSTRAINT `acesso_cofre_ibfk_1` FOREIGN KEY (`crip_cartao`) REFERENCES `cadastro` (`crip_cartao`);

